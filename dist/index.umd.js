!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).$y={})}(this,(function(t){"use strict";function e({delay:t=600,immediate:e=!1}={}){const i=t,r=e,n=Symbol("defaultID"),a={};return function(t,{params:e,delay:o,immediate:s,id:l=n}={}){if("function"!=typeof t)return console.error("[debounce warn]: TypeError: The First parameter is not a function");const c=s??r;c&&!a[l]&&t.apply(this,e),clearTimeout(a[l]),a[l]=setTimeout((()=>{c||t.apply(this,e),c&&(a[l]=void 0)}),o??i)}}function i({delay:t=500,immediate:e=!0}={}){const i=t,r=e,n=Symbol("defaultID"),a={[n]:!1};return function(t,{params:e,delay:o,immediate:s,id:l=n}={}){if("function"!=typeof t)return console.error("[throttle warn]: TypeError: The First parameter is not a function");if(a[l])return;const c=s??r;a[l]=!0,c&&t.apply(this,e),setTimeout((()=>{!c&&t.apply(this,e),a[l]=!1}),o??i)}}JSON.copy=t=>JSON.parse(JSON.stringify(t)),Math.rad=t=>t*Math.PI/180;const r=t=>Object.prototype.toString.call(t).slice(8,-1).toLowerCase(),n=t=>"object"===r(t),a=t=>"string"!=typeof t?"":t.charAt(0).toUpperCase()+t.slice(1).toLowerCase(),o=e(),s=i();const l=t=>{if(n(t))return JSON.copy(t);if(null==t)return{};";"==t.charAt(t.length-1)&&(t=t.slice(0,-1));const e=t.split(";"),i={};return e.forEach((t=>{const[e,r]=t.split(":");i[e]=r})),JSON.copy(i)};class c{index;constructor(t){if(Array.isArray(t))t.forEach(((t,e)=>{if(n(t))return c.setObjEnum(t,this);this[this[t]=c.getIndex(this)||e]=t}));else{if(!n(t))throw new TypeError("Enum parameter must be Object or Array");c.setObjEnum(v,this)}}static setObjEnum(t,e){Object.entries(t).forEach((([t,i])=>{e[e[t]=i]=t,e.index=i}))}static getIndex(t){if(null==t.index)return!1;if("number"!=typeof t.index)throw new Error("Enum member must have initializer.");return++t.index}}t.Distance=class{static EARTH_RADIUS=6378137;constructor(){}static getDistance(t,e){(isNaN(t.longitude)||isNaN(t.latitude)||isNaN(e.longitude)||isNaN(e.latitude))&&console.error("getDistance方法参数错误,请传坐标对象");const i=Math.rad(t.latitude),r=Math.rad(e.latitude),n=i-r,a=Math.rad(t.longitude)-Math.rad(e.longitude);let o=2*Math.asin(Math.sqrt(Math.pow(Math.sin(n/2),2)+Math.cos(i)*Math.cos(r)*Math.pow(Math.sin(a/2),2)));return o*=this.EARTH_RADIUS,o=Math.round(1e4*o)/1e4,o}static async from(t){const[e,{longitude:i,latitude:r}]=await uni.getLocation();return e&&uni.showToast({title:"获取位置失败",icon:"none"}),this.getDistance({longitude:i,latitude:r},t)}},t.Enum=c,t.MySet=class{constructor(){this.value=[]}has(t){return!!~this.value.indexOf(t)}add(t){let e=this.value.indexOf(t);return~e||this.value.push(t),e}delete(t,e=this.value.indexOf(t)){return!!~e&&this.value.splice(e,1)}checked(t){this.size>1&&this.delete(t,this.add(t))}checkedToggle(t){this.delete(t,this.add(t))}radio(t){this.value.splice(0,this.value.length,t)}radioToggle(t){this.value.includes(t)?this.value.splice(0,this.value.length):this.value.splice(0,this.value.length,t)}clear(){this.value.splice(0,this.value.length)}get size(){return this.value.length}},t.Urlquery=class{constructor(){}static parse(t,{omit:e=!0}={}){const i=t.indexOf("?");~i&&(t=t.slice(i+1));const r={};return t.includes("://")||t.split("&").forEach((t=>{const[i,n]=t.split("=");e&&void 0===n||(r[i]=n)})),r}static stringify(t,{prefix:e="?",encode:i=!0}={}){if("string"==typeof t&&t)return e?e+t:t;if(!n(t))return"";let r="";return Object.entries(t).forEach((([t,e])=>{void 0!==e&&(e=i?this.encodeParam(e):e,r+=`&${t}=${e}`)})),r=r.slice(1),e&&(r=e+r),r}static encodeParam(t){return(n(t)||Array.isArray(t))&&(t=JSON.stringify(t)),encodeURIComponent(t)}static getSpecifiedParams(t,...e){const i=Object.prototype.hasOwnProperty;let r=this.parse(t),n="";return e.forEach((t=>{i.call(r,t)&&(n+=`&${t}=${r[t]}`)})),n.slice(1)}},t.addUnit=(t,e="rpx")=>isNaN(t)?t:t+e,t.arrayToMatrix=(t,e)=>{const i=[],r=t.length;let n=0;for(;n<r;)i.push(t.slice(n,n+=e));return i},t.capitalize=a,t.chinesNum=t=>{let e=["零","一","二","三","四","五","六","七","八","九"],i=["","十","百","千","万"];t=parseInt(t);let r=t=>{let r=t.toString().split("").reverse(),n="",a=[];r.forEach(((t,r)=>{a.unshift("0"===t?e[t]:e[t]+i[r])}));let o=[];return a.forEach(((t,e)=>{"零"!==t&&o.push(e)})),a.length>1?a.forEach(((t,e)=>{"零"===a[a.length-1]?e<=o[o.length-1]&&(n+=t):n+=t})):n=a[0],n},n=Math.floor(t/1e4),a=t%1e4;return a.toString().length<4&&(a="0"+a),n?r(n)+"万"+r(a):r(t)},t.createWith=(t,e)=>{let i={};return e.forEach((e=>i[e]=t[e])),i},t.datatype=r,t.debounce=o,t.distanceUnit=t=>(isNaN(t)||((t=+t)>1e3?t=Math.round(t/100)/10+"km":((t<0||isNaN(t))&&(t=0),t=Math.round(t)+"m")),t),t.findIndexArr=(t,e,{targetKey:i="value",childKey:r="children",handler:n}={})=>{let a=[],o=0;return a.unshift(function t(e,s){return e.findIndex((e=>{let l=e[i]==s[o];return l&&("function"==typeof n&&n(e),s[++o]&&a.unshift(t(e[r],s))),l}))}(t,e)),a},t.getLocalStorageSize=()=>{let t=window.localStorage,{size:e}=new Blob(Object.keys(t).map((e=>t.getItem(e))));return e<1024?e+="B":e=e<1048576?(e/1024).toFixed(2)+"KB":e<1073741824?(e/1048576).toFixed(2)+"MB":(e/1073741824).toFixed(2)+"GB",e},t.getRandomInt=(t,e)=>Math.floor(Math.random()*(e-t+1)+t),t.getRandomItem=t=>t[Math.floor(Math.random()*t.length)],t.html2txt=t=>t.replace(/<[^>]*>/g,""),t.initDebounce=e,t.initThrottle=i,t.isObj=n,t.kebabcase2CamelCase=t=>t.split("-").map((t=>a(t))).join(""),t.mergeStyle=(...t)=>Object.assign({},...t.map((t=>l(t)))),t.randomColor=()=>`#${Math.random().toString(16).slice(2,6)}`,t.removeItem=(t,e,i=t.indexOf(e))=>!!~i&&t.splice(i,1),t.rgb=()=>"("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")",t.rgbToHex=(t,e,i)=>"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1),t.roundNum=(t,e=2)=>{let i=Math.pow(10,e);return(Math.round(t*i)/i).toFixed(e)},t.sleep=(t=30)=>new Promise((e=>setTimeout((()=>e()),t))),t.style2obj=l,t.throttle=s}));
